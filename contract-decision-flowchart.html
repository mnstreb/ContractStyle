<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construction Contract & Bidding Strategy Flowchart</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* A little custom style to ensure a minimum height for the body */
        body {
            min-height: 100vh;
        }
        .contract-button ul {
            text-align: left;
            padding-left: 1.5rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 text-white font-sans p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-3">
            Construction Contract & Bidding Strategy Flowchart
        </h1>
        <p class="text-center text-slate-300 mb-8">
            A tool for Engineers to select a contract based on the "Iron Triangle": Scope, Time, and Cost. Remember, you can only fix two.
        </p>

        <!-- START --><div class="flex flex-col items-center mb-3">
            <div class="border-2 border-white p-4 rounded-lg bg-slate-800 max-w-lg text-center">
                <p class="text-lg font-bold">START: Is the project scope & design well-defined?</p>
                <p class="text-sm text-slate-300">(e.g., IFC Drawings, Finalized Specifications)</p>
            </div>
        </div>

        <div class="flex justify-center mb-3">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
        </div>

        <!-- First Level - YES/NO --><div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 mb-4 max-w-5xl mx-auto">
            <!-- LEFT BRANCH - YES (Defined Scope) --><div class="flex flex-col items-center">
                <button id="btn-yes" class="text-center mb-3 p-3 rounded border-2 bg-slate-700 border-slate-400 hover:border-green-400 w-full transition-all">
                    <p class="font-bold">YES — Scope is clearly defined.</p>
                    <p class="text-sm">Design is mature, minimal changes expected.</p>
                </button>
                
                <div id="path-yes-down" class="hidden w-full">
                    <div class="flex justify-center">
                        <svg class="w-6 h-6 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                    </div>
                    <div class="border-2 border-slate-400 p-4 rounded-lg bg-slate-700 w-full">
                        <p class="font-semibold text-center text-sm">
                           Are work quantities also well-defined and fixed?
                        </p>
                    </div>
                </div>
            </div>

            <!-- RIGHT BRANCH - NO (Undefined Scope) --><div class="flex flex-col items-center">
                <button id="btn-no" class="text-center mb-3 p-3 rounded border-2 bg-slate-700 border-slate-400 hover:border-blue-400 w-full transition-all">
                    <p class="font-bold">NO — Scope is undefined or evolving.</p>
                    <p class="text-sm">Early design, fast-track, or high uncertainty.</p>
                </button>
                
                <div id="path-no-down" class="hidden w-full">
                     <div class="flex justify-center">
                        <svg class="w-6 h-6 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                    </div>
                    <div class="border-2 border-slate-400 p-4 rounded-lg bg-slate-700 w-full">
                        <p class="font-semibold text-center text-sm">
                            Is it critical to cap the maximum financial exposure (cost ceiling)?
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Second Level Answers --><div id="second-level" class="hidden grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 max-w-5xl mx-auto mb-4">
            <!-- YES path options --><div id="second-level-yes-path" class="hidden w-full md:col-span-1">
                 <div class="grid grid-cols-2 gap-4">
                    <div id="second-level-yes-yes" class="flex flex-col items-center">
                        <button class="text-center mb-2 text-sm p-3 rounded border-2 w-full transition-all bg-slate-700 border-slate-400 hover:border-green-400 h-full">
                            <p class="font-bold">YES — Quantities Fixed</p>
                            <p>(e.g., building construction)</p>
                        </button>
                        <div class="arrow-container hidden">
                            <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                        </div>
                    </div>
                    <div id="second-level-yes-no" class="flex flex-col items-center">
                        <button class="text-center mb-2 text-sm p-3 rounded border-2 w-full transition-all bg-slate-700 border-slate-400 hover:border-green-400 h-full">
                            <p class="font-bold">NO — Quantities Vary</p>
                            <p>(e.g., earthworks, remediation)</p>
                        </button>
                         <div class="arrow-container hidden">
                            <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                        </div>
                    </div>
                 </div>
            </div>
            
            <!-- NO path options --><div id="second-level-no-path" class="hidden w-full md:col-span-1">
                 <div class="grid grid-cols-2 gap-4">
                    <div id="second-level-no-yes" class="flex flex-col items-center">
                        <button class="text-center mb-2 text-sm p-3 rounded border-2 w-full transition-all bg-slate-700 border-slate-400 hover:border-blue-400 h-full">
                            <p class="font-bold">YES — Need a Cost Cap</p>
                            <p>Budget certainty is paramount.</p>
                        </button>
                         <div class="arrow-container hidden">
                            <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                        </div>
                    </div>
                    <div id="second-level-no-no" class="flex flex-col items-center">
                        <button class="text-center mb-2 text-sm p-3 rounded border-2 w-full transition-all bg-slate-700 border-slate-400 hover:border-blue-400 h-full">
                            <p class="font-bold">NO — Flexibility is Key</p>
                            <p>For emergencies or R&D work.</p>
                        </button>
                         <div class="arrow-container hidden">
                            <svg class="w-5 h-5 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contract Type Boxes --><div id="contract-level" class="hidden grid-cols-1 md:grid-cols-4 gap-8 mb-6 max-w-6xl mx-auto">
             <div id="contract-lumpSum" class="md:col-start-1">
                <button class="contract-button border-2 p-4 rounded-lg transition-all w-full h-full border-slate-400 bg-slate-700 hover:border-green-400">
                    <p class="font-bold mb-2 text-center">Lump Sum / Fixed Price</p>
                    <ul class="text-xs space-y-1 list-disc">
                        <li><strong>Fixes:</strong> Scope, Cost</li>
                        <li><strong>Flexible:</strong> Time (by contractor)</li>
                        <li>Max risk on contractor.</li>
                    </ul>
                </button>
            </div>
             <div id="contract-unitPrice" class="md:col-start-2">
                <button class="contract-button border-2 p-4 rounded-lg transition-all w-full h-full border-slate-400 bg-slate-700 hover:border-green-400">
                    <p class="font-bold mb-2 text-center">Unit Price / Remeasurement</p>
                    <ul class="text-xs space-y-1 list-disc">
                        <li><strong>Fixes:</strong> Unit Rates</li>
                        <li><strong>Flexible:</strong> Final Cost, Scope</li>
                        <li>Shared risk profile.</li>
                    </ul>
                </button>
            </div>
             <div id="contract-gmp">
                <button class="contract-button border-2 p-4 rounded-lg transition-all w-full h-full border-slate-400 bg-slate-700 hover:border-blue-400">
                    <p class="font-bold mb-2 text-center">GMP (For Large Projects)</p>
                    <ul class="text-xs space-y-1 list-disc">
                        <li><strong>Primary Fix:</strong> Max Cost</li>
                        <li><strong>Flexible:</strong> Scope, Time</li>
                        <li>Includes shared savings incentive.</li>
                    </ul>
                </button>
            </div>
             <div id="contract-tmNTE">
                <button class="contract-button border-2 p-4 rounded-lg transition-all w-full h-full border-slate-400 bg-slate-700 hover:border-blue-400">
                    <p class="font-bold mb-2 text-center">T&M w/ NTE (For Small Projects)</p>
                     <ul class="text-xs space-y-1 list-disc">
                        <li><strong>Primary Fix:</strong> Max Cost</li>
                        <li><strong>Flexible:</strong> Scope, Time</li>
                        <li>Simpler, no shared savings.</li>
                    </ul>
                </button>
            </div>
             <div id="contract-costPlus" class="md:col-start-4">
                <button class="contract-button border-2 p-4 rounded-lg transition-all w-full h-full border-slate-400 bg-slate-700 hover:border-blue-400">
                    <p class="font-bold mb-2 text-center">Cost-Plus / T&M</p>
                    <p class="text-xs mb-2 text-center">(Time & Materials)</p>
                    <ul class="text-xs space-y-1 list-disc">
                        <li><strong>Fixes:</strong> None (maybe Time)</li>
                        <li><strong>Flexible:</strong> Cost, Scope</li>
                        <li>Max risk on owner.</li>
                    </ul>
                </button>
            </div>
        </div>

        <!-- RESULT --><div id="result-box" class="hidden mt-8 max-w-3xl mx-auto">
            <div class="bg-gradient-to-r from-green-600 to-blue-600 p-6 md:p-8 rounded-xl shadow-2xl">
                <div class="flex items-center gap-3 mb-4">
                     <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
                    <h2 class="text-2xl md:text-3xl font-bold">Recommended Contract Strategy:</h2>
                </div>
                <p id="result-name" class="text-xl md:text-2xl font-bold mb-3"></p>
                <p id="result-desc" class="text-base md:text-lg text-slate-100"></p>
            </div>
        </div>

        <!-- Reset Button --><div id="reset-container" class="hidden text-center mt-6">
            <button id="reset-btn" class="px-6 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg font-semibold transition-colors">
                Reset & Try Again
            </button>
        </div>
    </div>

    <script>
        const contracts = {
            'lumpSum': { name: 'Lump Sum (Fixed Price)', desc: 'A high-certainty model where a single price is fixed for a detailed scope. <br><br><strong>Iron Triangle Focus:</strong> This contract enforces a fixed <strong>Cost</strong> and a fixed <strong>Scope</strong>. The contractor manages their schedule (Time) to deliver within that budget. Any owner-driven changes to Scope will require a change order, impacting Cost and potentially Time.' },
            'unitPrice': { name: 'Unit Price (Remeasurement)', desc: 'Used when work activities are defined but quantities are not. Price is per unit. <br><br><strong>Iron Triangle Focus:</strong> This contract enforces a fixed <strong>Unit Cost</strong> (e.g., $ per cubic yard), but the final total <strong>Cost</strong> and final <strong>Scope</strong> (quantity) are flexible. It\'s a way to enforce fair pricing on an unknown volume of work.' },
            'gmp': { name: 'Guaranteed Maximum Price (GMP) for Large Projects', desc: 'A cost-reimbursable contract with a ceiling, best for large, complex projects. It often includes a shared savings clause, creating an incentive for the contractor to be efficient. <br><br><strong>Iron Triangle Focus:</strong> Enforces a fixed maximum <strong>Cost</strong>. By necessity, the <strong>Scope</strong> and <strong>Time</strong> must remain flexible to accommodate the undefined nature of the work, though a target schedule is set.' },
            'tmNTE': { name: 'Time & Materials with Not-to-Exceed (T&M w/ NTE) for Smaller Projects', desc: 'A simpler cost-reimbursable contract with a hard cost ceiling. It\'s more straightforward than a GMP and suitable for smaller-scale projects where administrative overhead needs to be minimal. <br><br><strong>Iron Triangle Focus:</strong> Like a GMP, this primarily enforces a fixed maximum <strong>Cost</strong>. The <strong>Scope</strong> and <strong>Time</strong> are flexible variables, allowing for agility within the capped budget.' },
            'costPlus': { name: 'Cost-Plus or Time & Materials (T&M)', desc: 'The owner pays all actual costs plus a fee for profit/overhead. <br><br><strong>Iron Triangle Focus:</strong> This model prioritizes a flexible <strong>Scope</strong> and a fast <strong>Time</strong> to start work. By definition, <strong>Cost</strong> is the flexible lever and cannot be enforced. You can only audit the costs as they are incurred to ensure they are reasonable.' },
        };

        let selectedPath = [];
        let selectedContract = null;

        const btnYes = document.getElementById('btn-yes');
        const btnNo = document.getElementById('btn-no');
        const pathYesDown = document.getElementById('path-yes-down');
        const pathNoDown = document.getElementById('path-no-down');
        const secondLevel = document.getElementById('second-level');
        const contractLevel = document.getElementById('contract-level');
        const resultBox = document.getElementById('result-box');
        const resetContainer = document.getElementById('reset-container');
        const resetBtn = document.getElementById('reset-btn');

        const secondLevelYesPath = document.getElementById('second-level-yes-path');
        const secondLevelNoPath = document.getElementById('second-level-no-path');
        const secondLevelYesYes = document.getElementById('second-level-yes-yes');
        const secondLevelYesNo = document.getElementById('second-level-yes-no');
        const secondLevelNoYes = document.getElementById('second-level-no-yes');
        const secondLevelNoNo = document.getElementById('second-level-no-no');

        const contractLumpSum = document.getElementById('contract-lumpSum');
        const contractUnitPrice = document.getElementById('contract-unitPrice');
        const contractGmp = document.getElementById('contract-gmp');
        const contractTmNTE = document.getElementById('contract-tmNTE');
        const contractCostPlus = document.getElementById('contract-costPlus');
        
        const allSecondLevelButtons = [secondLevelYesYes, secondLevelYesNo, secondLevelNoYes, secondLevelNoNo];
        const allContractCards = [contractLumpSum, contractUnitPrice, contractGmp, contractCostPlus, contractTmNTE];


        function reset() {
            selectedPath = [];
            selectedContract = null;

            btnYes.classList.remove('bg-green-900/50', 'border-green-400', 'scale-105');
            btnNo.classList.remove('bg-blue-900/50', 'border-blue-400', 'scale-105');

            pathYesDown.classList.add('hidden');
            pathNoDown.classList.add('hidden');

            secondLevel.classList.add('hidden');
            secondLevel.classList.remove('grid');
            secondLevelYesPath.classList.add('hidden');
            secondLevelNoPath.classList.add('hidden');

            allSecondLevelButtons.forEach(el => {
                const button = el.querySelector('button');
                button.classList.remove('bg-green-900/50', 'border-green-400', 'scale-105', 'bg-blue-900/50', 'border-blue-400');
                const arrow = el.querySelector('.arrow-container');
                if (arrow) arrow.classList.add('hidden');
            });
            
            contractLevel.classList.add('hidden');
            contractLevel.classList.remove('grid');
            allContractCards.forEach(el => {
                el.classList.add('hidden');
                const button = el.querySelector('button');
                button.classList.remove('border-green-400', 'bg-green-900/50', 'scale-105', 'border-blue-400', 'bg-blue-900/50');
            });

            resultBox.classList.add('hidden');
            resetContainer.classList.add('hidden');
        }

        function handleFirstChoice(choice) {
            reset();
            selectedPath = [choice];
            
            resetContainer.classList.remove('hidden');
            secondLevel.classList.add('grid');
            secondLevel.classList.remove('hidden');

            if (choice === 'yes') {
                btnYes.classList.add('bg-green-900/50', 'border-green-400', 'scale-105');
                pathYesDown.classList.remove('hidden');
                secondLevelYesPath.classList.remove('hidden');
                // Align this path to the left side of the grid
                secondLevelYesPath.classList.add('md:col-start-1');
                secondLevelNoPath.classList.add('md:col-start-2');
            } else {
                btnNo.classList.add('bg-blue-900/50', 'border-blue-400', 'scale-105');
                pathNoDown.classList.remove('hidden');
                secondLevelNoPath.classList.remove('hidden');
                // Align this path to the right side of the grid
                secondLevelYesPath.classList.add('md:col-start-1');
                secondLevelNoPath.classList.add('md:col-start-2');
            }
        }
        
        function handleSecondChoice(choice) {
            selectedPath = [selectedPath[0], choice];
            selectedContract = null;

            allSecondLevelButtons.forEach(el => {
                const button = el.querySelector('button');
                button.classList.remove('bg-green-900/50', 'border-green-400', 'scale-105', 'bg-blue-900/50', 'border-blue-400');
                const arrow = el.querySelector('.arrow-container');
                if (arrow) arrow.classList.add('hidden');
            });
            
            allContractCards.forEach(el => el.classList.add('hidden'));

            let targetEl, colorClass, borderColor;
            if (selectedPath[0] === 'yes') {
                targetEl = choice === 'yes' ? secondLevelYesYes : secondLevelYesNo;
                colorClass = 'bg-green-900/50';
                borderColor = 'border-green-400';
            } else {
                targetEl = choice === 'yes' ? secondLevelNoYes : secondLevelNoNo;
                colorClass = 'bg-blue-900/50';
                borderColor = 'border-blue-400';
            }

            targetEl.querySelector('button').classList.add(colorClass, borderColor, 'scale-105');
            targetEl.querySelector('.arrow-container').classList.remove('hidden');

            contractLevel.classList.add('grid');
            contractLevel.classList.remove('hidden');
            resultBox.classList.add('hidden');

            if (selectedPath[0] === 'yes' && selectedPath[1] === 'yes') contractLumpSum.classList.remove('hidden');
            if (selectedPath[0] === 'yes' && selectedPath[1] === 'no') contractUnitPrice.classList.remove('hidden');
            if (selectedPath[0] === 'no' && selectedPath[1] === 'yes') {
                contractGmp.classList.remove('hidden');
                contractTmNTE.classList.remove('hidden');
                // Correctly center GMP and T&M w/ NTE under the "YES - Need a Cost Cap" button
                contractGmp.classList.remove('md:col-start-1', 'md:col-start-2', 'md:col-start-4');
                contractTmNTE.classList.remove('md:col-start-1', 'md:col-start-2', 'md:col-start-4');
                contractGmp.classList.add('md:col-start-2');
                contractTmNTE.classList.add('md:col-start-3');
            }
            if (selectedPath[0] === 'no' && selectedPath[1] === 'no') {
                contractCostPlus.classList.remove('hidden');
                contractCostPlus.classList.add('md:col-start-4');
            }
        }

        function handleContractChoice(contractKey) {
            selectedContract = contractKey;
            
            allContractCards.forEach(el => {
                const button = el.querySelector('button');
                button.classList.remove('border-green-400', 'bg-green-900/50', 'scale-105', 'border-blue-400', 'bg-blue-900/50');
            });
            
            let targetEl, colorClass, borderColor;
            if (selectedPath[0] === 'yes') {
                colorClass = 'bg-green-900/50';
                borderColor = 'border-green-400';
            } else {
                colorClass = 'bg-blue-900/50';
                borderColor = 'border-blue-400';
            }

            const contractMap = {
                'lumpSum': contractLumpSum,
                'unitPrice': contractUnitPrice,
                'gmp': contractGmp,
                'tmNTE': contractTmNTE,
                'costPlus': contractCostPlus,
            };
            targetEl = contractMap[contractKey];
            
            targetEl.querySelector('button').classList.add(borderColor, colorClass, 'scale-105');

            document.getElementById('result-name').textContent = contracts[contractKey].name;
            document.getElementById('result-desc').innerHTML = contracts[contractKey].desc; // Use innerHTML to render the <br> and <strong> tags
            resultBox.classList.remove('hidden');
            resultBox.scrollIntoView({ behavior: 'smooth' });
        }

        btnYes.addEventListener('click', () => handleFirstChoice('yes'));
        btnNo.addEventListener('click', () => handleFirstChoice('no'));
        resetBtn.addEventListener('click', reset);

        secondLevelYesYes.querySelector('button').addEventListener('click', () => handleSecondChoice('yes'));
        secondLevelYesNo.querySelector('button').addEventListener('click', () => handleSecondChoice('no'));
        secondLevelNoYes.querySelector('button').addEventListener('click', () => handleSecondChoice('yes'));
        secondLevelNoNo.querySelector('button').addEventListener('click', () => handleSecondChoice('no'));
        
        contractLumpSum.querySelector('button').addEventListener('click', () => handleContractChoice('lumpSum'));
        contractUnitPrice.querySelector('button').addEventListener('click', () => handleContractChoice('unitPrice'));
        contractGmp.querySelector('button').addEventListener('click', () => handleContractChoice('gmp'));
        contractTmNTE.querySelector('button').addEventListener('click', () => handleContractChoice('tmNTE'));
        contractCostPlus.querySelector('button').addEventListener('click', () => handleContractChoice('costPlus'));

        // Initial call to set the state
        reset();
    </script>
</body>
</html>


